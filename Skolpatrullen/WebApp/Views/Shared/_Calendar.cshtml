@model Database.Models.Course
@{
    ViewData["Title"] = "Home Page";
}

@Html.HiddenFor(c => c.Id, new { Id = "CourseId" })
<div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100vh;'>
    <div class="dhx_cal_navline">
        <div class="dhx_cal_prev_button">&nbsp;</div>
        <div class="dhx_cal_next_button">&nbsp;</div>
        <div class="dhx_cal_today_button"></div>
        <div class="dhx_cal_date"></div>
        <div class="dhx_cal_tab" name="day_tab"></div>
        <div class="dhx_cal_tab" name="week_tab"></div>
        <div class="dhx_cal_tab" name="month_tab">Månad</div>
    </div>
    <div class="dhx_cal_header"></div>
    <div class="dhx_cal_data"></div>
</div>
<script>
    //uncomment this to make scheduler readonly
    //scheduler.config.readonly = true;
    scheduler.config.xml_date = "%Y-%m-%d %H:%i";
    scheduler.attachEvent("onTemplatesReady", function () {
        scheduler.templates.event_text = function (start, end, event) {
            return "<b>" + event.text + "</br><br><i>" + event.course + "</i>";
        }
    });
    scheduler.attachEvent("onEventCreated", function (id, e) {
        let event = scheduler.getEvent(id);
        let courseId = document.getElementById("CourseId").value;
        event.courseId = parseInt(courseId);
        return true;
    });
    scheduler.init('scheduler_here', new Date(2020, 2, 07), "week");

    //load data from backend
    scheduler.load("https://localhost:44367/lesson", "json");
    //connect backend to scheduler
    var dp = new dataProcessor("https://localhost:44367/lesson");
    dp.init(scheduler);

    //set data exchange mode
    dp.setTransactionMode("REST");
</script>
